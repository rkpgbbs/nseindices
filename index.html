<!DOCTYPE html>
<html>
<head>
  <title>NSE Indices Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
  <div class="container-fluid mt-4">
    <h1 class="text-center mb-4">NSE Indices Performance Dashboard</h1>
    <div id="loading" class="text-center">Loading data...</div>
    <div class="table-responsive">
      <table class="table table-striped" id="dataTable">
        <thead class="table-dark"></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
    // Replace with your actual GitHub username and repo name
    const CSV_URL = 'https://github.com/rkpgbbs/nseindices/blob/main/nse_data.csv';
    
    function loadData() {
      PapaParse.parse(CSV_URL, {
        download: true,
        header: false,
        complete: function(results) {
          console.log('Loaded ', results.data.length, 'rows');
          buildTable(results.data);
        },
        error: function(error) {
          console.error('Error:', error);
          document.getElementById('loading').innerHTML = 'Error loading  ' + error.message;
        }
      });
    }

    function buildTable(data) {
      if (!data || data.length < 2) {
        document.getElementById('loading').innerHTML = 'No data available';
        return;
      }
      
      const headers = data[0];
      const rows = data.slice(1);
      
      // Build header
      let headerHTML = '<tr>';
      headers.forEach(header => {
        headerHTML += `<th>${header}</th>`;
      });
      headerHTML += '</tr>';
      document.querySelector('#dataTable thead').innerHTML = headerHTML;
      
      // Build rows (show first 50 for performance)
      let rowsHTML = '';
      const displayRows = rows.slice(0, 50);
      displayRows.forEach(row => {
        rowsHTML += '<tr>';
        row.forEach(cell => {
          rowsHTML += `<td>${cell || ''}</td>`;
        });
        rowsHTML += '</tr>';
      });
      
      document.querySelector('#dataTable tbody').innerHTML = rowsHTML;
      document.getElementById('loading').style.display = 'none';
    }

    // Load data when page loads
    window.onload = loadData;
  </script>
</body>
</html>
